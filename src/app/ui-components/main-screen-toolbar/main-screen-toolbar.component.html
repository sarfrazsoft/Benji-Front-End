<div class="mainscreen-toolbar bg-white">
  <div class="flexer--space-between">
    <div class="benji-logo-container">
      <img [src]="darkLogo" alt="Benji Logo" class="benji-logo"/>
    </div>
    <ng-container *ngxPermissionsOnly="'ADMIN'">
      <ng-container *ngIf="!isEditor && (activityState && activityState.activity_type !== 'LobbyActivity')">
        <div fxLayout="row" fxLayoutGap="8px">
          <!-- Timer control -->
          <div class="time-info" fxLayoutAlign="center center">
            <div class="ms-header-timer" *ngIf="showTimer" 
              [matMenuTriggerFor]="timerMenu">
              <benji-number-timer
                [timer]="timer"
                endStateText="Times Up!"
              ></benji-number-timer>
            </div>
          </div>
                  
          <div class="option" fxLayoutAlign="center center"
            [matMenuTriggerFor]="timerMenu"
            [matTooltipPosition]="'below'"
            matTooltip="Timer"
            show-delay="100">
              <img src="/assets/img/dark_alarm.svg"/>
              <mat-menu 
                #timerMenu="matMenu" 
                class="dynamic-timer-menu" 
                [overlapTrigger]="false" 
                xPosition="before">
                <benji-dynamic-timer 
                  [updateMessage]="activityState"
                  (controlClicked)="controlClicked($event)"
                  (propagate)="propagate($event)">
                </benji-dynamic-timer>
              </mat-menu>
          </div>

          <!-- Grouping control (click)="groupingMenuClicked()" -->
          <div class="option" 
            fxLayoutAlign="center center"
            *ngIf="activityState && activityState.activity_type === 'CaseStudyActivity'"
            (click)="openGroupingToolDialog()"
            [ngClass]="{ active: isGroupingShowing }"
            [matMenuTriggerFor]="groupingMenu"
            matTooltip="Groups"
            [matTooltipPosition]="'below'"
            show-delay="100">
              <img src="/assets/img/grouping.svg"/> 
              <mat-menu 
                #groupingMenu="matMenu" 
                class="activity-settings-menu "  
                [overlapTrigger]="false" 
                xPosition="before">
                <benji-grouping-control
                  [activityState]="activityState"
                  (socketMessage)="propagate($event)">
                </benji-grouping-control>
              </mat-menu>
          </div>

          <!-- Grouping collaborate Dialog" -->
          <div class="option" 
            fxLayoutAlign="center center"
            *ngIf="activityState && activityState.activity_type === 'CaseStudyActivity'"
            (click)="openGroupingCollaborateDialog()">
              <img src="/assets/img/grouping/collaborate.svg"/>
          </div>

          <!-- Vote control -->
          <div class="option" 
            fxLayoutAlign="center center"
            *ngIf="activityState && activityState.activity_type === 'BrainstormActivity'"
            [matMenuTriggerFor]="voteMenu"
            matTooltip="Vote"
            [matTooltipPosition]="'below'"
            show-delay="100">
              <img src="/assets/img/thumb.svg"/> 
              <mat-menu 
                #voteMenu="matMenu" 
                class="activity-settings-menu "  
                [overlapTrigger]="false" 
                xPosition="before">
                <benji-vote-control
                  (socketMessage)="brainstormSubmissionComplete($event)">
                </benji-vote-control>
              </mat-menu>
          </div>

          <!-- Share control -->
          <div class="option" 
            fxLayoutAlign="center center"
            *ngIf="isSharingAllowed(activityState)"
            [ngClass]="{ active: isSharing }"
            (click)="startSharingTool()"
            matTooltip="Vote"
            [matTooltipPosition]="'below'"
            show-delay="100">
              <img src="/assets/img/shareIcon.svg"/>
          </div>

          <!-- Activities Navigation -->
          <div class="option arrow" fxLayoutAlign="center center" (click)="controlClicked('previous')">
            <img src="/assets/img/chevron_left.svg"/> 
          </div>
          <div class="option" fxLayoutAlign="center center"
            [matMenuTriggerFor]="navigationMenu"
            [matTooltipPosition]="'below'"
            matTooltip="Activities"
            show-delay="100">
              <span>{{ currentActivityIndex }}</span>
              <mat-menu 
                #navigationMenu="matMenu" 
                class="activity-settings-menu activity-session-menu"  
                [overlapTrigger]="false" 
                xPosition="before">
                <benji-session-navigation 
                  [activityState]="activityState"
                  [disableControls]="disableControls"
                  (navigate)="navigateToActivity($event)"
                  (setActivityIndex)="setCurrentActivityIndex($event)">
                </benji-session-navigation>
              </mat-menu>
          </div>

          <div class="option arrow" fxLayoutAlign="center center" (click)="controlClicked('next')" *ngIf="isLastActivity">
            <img src="/assets/img/chevron_right.svg" /> 
          </div>

        </div>
      </ng-container>
    </ng-container>
  </div>
</div>
