<div class="mcq-card">
  <!-- show questions -->
  <ng-container *ngIf="showQuestion">
    <div class="b-flat-card__body">
      <h3 class="pn-600 primary-color-darkest">
        {{ activityState.mcqactivity.question.question }}
      </h3>
      <div *ngIf="getCorrectChoices().length > 1" class="multi-correct">
        Select all correct answers
      </div>
      <benji-participant-timer
        [timer]="timer"
        [endAudio]="'bell.wav'"
        [timerOffset]="avgServerTimeOffset"
      ></benji-participant-timer>
    </div>
    <div class="b-flat-card__action" >
      <div  fxLayout="column">
        <div 
          *ngFor="let option of activityState.mcqactivity.question.mcqchoice_set; let i = index"
          class="mcq-button-container bg-primary-color">
          <button
            class="unselected selected-primary-border-only voting-idea-button"
            [ngClass]="{
              selected: isSelected(option),
              inactive: answerSubmitted
            }"
            (click)="selectOption(option)"
          >
            {{ option.choice_text }}
          </button>
        </div>
      </div>
      <div class="mcq-button-container">
        <button 
          class="white-color center-text voting-submit"
          (click)="submitAnswer()"
          [ngClass]="{
            'submit-inactive': answerSubmitted,
            'bg-primary-color': !answerSubmitted
          }"
          [disabled]="answerSubmitted ? 'disabled': null" >
           {{ answerSubmitted ? 'Submitted' : 'Submit' }}
        </button>
      </div>
    </div>
  </ng-container>

  <!-- show result -->
  <ng-container *ngIf="showQuestionsAnswer">
    <div class="b-flat-card__body">
      <h3 class="pn-600 primary-color-darkest">
        {{ activityState.mcqactivity.question.question }}
      </h3>
    </div>
    <div class="b-flat-card__action" >
      <div  fxLayout="column" fxLayout="column" fxLayoutGap="16px">
        <div 
          *ngFor="let choice of activityState.mcqactivity.question.mcqchoice_set; let i = index"
          class="mcq-button-container bg-primary-color">
          <div
          class="options"
          fxFlex="100%"
          [ngClass]="{
            'correct-choice': choice.is_correct,
            'correct-selected-choice': choice.responsePercent > 0 ? true : false
          }"
        >
          <div class="option">
            <div class="info" fxLayout="row" fxLayoutAlign="space-between">
              <div class="option-detail" fxLayout="row" fxLayoutGap="2vw">
                <div class="text">{{ choice.text }}</div>
              </div>
              <div class="percentage" fxLayoutAlign="end center">
                <div class="number">
                  {{ choice.noOfResponses }}
                </div>
              </div>
            </div>
            <div
              id="progressbar"
              [ngClass]="{ 'correct-choice': choice.is_correct }"
            >
              <div
                class="bg-primary-color-light"
                [style.width.%]="choice.responsePercent"
                [ngClass]="{
                  'correct-choice': choice.is_correct,
                  'correct-selected-choice':
                    choice.responsePercent > 0 ? true : false
                }"
              ></div>
            </div>
          </div>
        </div>
        </div>
      </div>
    </div>
    <!-- <div class="b-flat-card__body center-text">
      <div class="twemoji">
        <app-b-twemoji
          *ngIf="answersResults() === 'allCorrect'"
          emoji="🎉"
        ></app-b-twemoji>
        <app-b-twemoji
          *ngIf="answersResults() === 'allWrong'"
          emoji="🙊"
        ></app-b-twemoji>
        <app-b-twemoji
          *ngIf="answersResults() === 'someCorrect'"
          emoji="👏"
        ></app-b-twemoji>
      </div>
      <h1 class="pn-700 black-color">
        {{ getResultText() }}
      </h1>
    </div>
    <div class="b-flat-card__action"
      *ngIf="answersResults() !== 'someCorrect'">
      <ng-container *ngFor="let option of selectedChoices; let i = index">
        <button
          class="b-standard-button unselected result-button"
          [ngClass]="{
            correct: option.is_correct,
            incorrect: !option.is_correct
          }">
          {{ option.choice_text }}
        </button>
      </ng-container>
    </div>
    <div *ngIf="answersResults() === 'allWrong' || answersResults() === 'allCorrect'" class="b-flat-card__action-detail">
      <p class="result-button">The correct answer is</p>
      <ng-container *ngFor="let option of getCorrectChoices();let i = index">
        <button
          class="b-standard-button unselected result-button"
          [ngClass]="{correct: option.is_correct}">
          {{ option.choice_text }}
        </button>
      </ng-container>
    </div> -->
  </ng-container>
</div>







<!-- 
<div class="options-container" fxLayout="column" fxLayoutGap="8px">
  <div *ngFor="let choice of question.choices; let i = index">

  </div>
</div> -->
