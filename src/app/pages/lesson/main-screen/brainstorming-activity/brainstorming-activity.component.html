<!-- New brain storm code  -->
<div fxLayout="column" class="mainscreen-activity brainstorming-ms" style="overflow: hidden;">
  <div class="lesson-top-banner compact">
    <div fxLayout="row" fxLayoutAlign="space-between center" >
      <div fxLayoutAlign="start center" class="instructions">
        <h2
          class="pn-500 primary-color"
          [ngClass]="{
            'long-instructions': instructions.length > 65
          }"
        >
          {{ instructions }}
        </h2>
      </div>
      <ng-container *ngxPermissionsOnly="'ADMIN'">
        <submitted-counter  
          [answeredParticipants]="answeredParticipants" 
          [unansweredParticipants]="unansweredParticipants">
        </submitted-counter>
      </ng-container>
    </div>
  </div>
  <div class="brainstorm-container">
    <ng-container *ngIf="categorizeFlag">
      <benji-categorized-ideas
        [submissionScreen]="submissionScreen"
        [voteScreen]="voteScreen"
        [act]="act"
        [minWidth]="getMinWidth()"
        [sendMessage]="sendMessage"
        [joinedUsers]="joinedUsers"
        [showUserName]="showUserName"
        (viewImage)="viewImage($event)"
        (deleteIdea)="deleteIdea($event)"
      >
      </benji-categorized-ideas>
    </ng-container>

    <ng-container *ngIf="!categorizeFlag">
      <benji-uncategorized-ideas
        [submissionScreen]="submissionScreen"
        [voteScreen]="voteScreen"
        [act]="act"
        [minWidth]="getMinWidth()"
        [sendMessage]="sendMessage"
        [joinedUsers]="joinedUsers"
        [showUserName]="showUserName"
        (viewImage)="viewImage($event)"
        (deleteIdea)="deleteIdea($event)">

      </benji-uncategorized-ideas>
    </ng-container>
  </div>

  <ng-container *ngxPermissionsOnly="'PARTICIPANT'" >
    <div class="brainstorm-ps-container" *ngIf="showParticipantUI" [@slideInRightOnEnter] [@fadeOutOnLeave]>
      <div 
        class="participant-view-hide-trigger-container" 
        fxLayoutAlign="end"
        (click)="showParticipantUI = false">
        <div class="participant-view-hide-trigger" fxLayoutAlign="center center"> 
          <img src="../../../assets/img/goBack.svg" alt="">
        </div>
      </div>
      <div >
        <benji-ps-brainstorming-activity
          [activityState]="activityState"
          [avgServerTimeOffset]="avgServerTimeOffset"
          (sendMessage)="sendSocketMessage($event)">
        </benji-ps-brainstorming-activity>
      </div>
    </div>
    <div
      *ngIf="!showParticipantUI"
      (click)="showParticipantUI = true" 
      class="participant-view-trigger" fxLayoutAlign="center center">
      <img  src="../../../assets/img/whiteCross.svg" alt="">
    </div>
  </ng-container>
</div>
