<div fxLayout="column" class="barinstorm-main">
  <div class="barinstorm-header" fxLayout="row" fxLayoutAlign="space-between center" fxLayout.lt-sm="column">
    <div fxLayout="column" class="instructions">
      <div fxLayout="row" fxLayoutGap="16px" fxLayoutAlign="center center" >
        <div>
          <div
            class="brainstorm-h2 black-color"
            [ngClass]="{
              'long-instructions': instructions.length > 65
            }"
          >
            {{ instructions }}
          </div>
          <div class="sub-header">{{ sub_instructions }}</div>
        </div>
        <ng-container *ngxPermissionsOnly="'PARTICIPANT'">
          <benji-participant-grouping-container
            *ngIf="!actEditor"
            [activityState]="activityState"
            (sendMessage)="sendSocketMessage($event)"
            [participantCode]="participantCode">
          </benji-participant-grouping-container>
        </ng-container>
      </div>
    </div>
    <div class="options-buttons" fxLayout="row" fxLayout.lt-sm="row-reverse" fxLayoutGap="8px">
      <ng-container *ngxPermissionsOnly="'ADMIN'">
        <div fxLayout="row-reverse" fxLayout.lt-sm="row" fxLayoutGap="8px">
          <div *ngIf="classificationTypes && participantGroups?.length">
            <ng-select
              class="brainstorm-groups menus"
              [items]="classificationTypes"
              bindLabel="title"
              placeholder="Groups"
              (change)="classificationTypeChanged(selectedClassificationType)"
              [(ngModel)]="selectedClassificationType"
              appendTo="body"
              [searchable]="false"
              [clearable]="false">
              <ng-template ng-option-tmp let-item="item" let-index="index" let-search="searchTerm">
                <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="10px">
                  <img src="{{item.imgUrl}}" />
                  <div fxLayout="column">
                    <div class="title">{{ item.title }}</div>
                    <div class="description">{{ item.description }}</div>
                  </div>
                </div>
            </ng-template>
            </ng-select>
          </div>
          <div *ngIf="showParticipantsGroupsDropdown">
            <ng-select
              class="menus"
              [items]="participantGroups"
              bindLabel="title"
              placeholder="Groups"
              (change)="ParticipantGroupChanged(selectedParticipantGroup)"
              [(ngModel)]="selectedParticipantGroup"
              appendTo="body"
              [searchable]="false"
              [clearable]="false">
              <ng-template ng-option-tmp let-item="item" let-index="index">
                <div>{{ item.title }}</div>
              </ng-template>
            </ng-select>
          </div>
        </div>
      </ng-container>
      <div fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="8px" class="import-button bg-primary-color" (click)="openDialog()">
        <div class="plus">+</div>
        <div>Post idea</div>
      </div>
    </div>
  </div>
  <div class="brainstorm-container" [ngClass]="{'thread-mode': boardMode=='thread'}">
    <ng-container *ngIf="boardMode=='columns'">
      <benji-categorized-ideas
        [board]="board"
        [submissionScreen]="submissionScreen"
        [voteScreen]="voteScreen"
        [act]="act"
        [activityState]="activityState"
        [minWidth]="getMinWidth()"
        [sendMessage]="sendMessage"
        [joinedUsers]="joinedUsers"
        [showUserName]="showUserName"
        [participantCode]="participantCode"
        [eventType]="eventType"
        [categorizeFlag]="categorizeFlag"
        [myGroup]="myGroup"
        (addCardUnderCategory)="addCardUnderCategory($event)"
        (viewImage)="viewImage($event)"
        (deleteIdea)="deleteIdea($event)"
      >
      </benji-categorized-ideas>
    </ng-container>

    <ng-container *ngIf="boardMode=='grid'">
      <benji-uncategorized-ideas
        [board]="board"
        [submissionScreen]="submissionScreen"
        [voteScreen]="voteScreen"
        [act]="act"
        [activityState]="activityState"
        [minWidth]="getMinWidth()"
        [sendMessage]="sendMessage"
        [joinedUsers]="joinedUsers"
        [showUserName]="showUserName"
        [participantCode]="participantCode"
        [eventType]="eventType"
        [categorizeFlag]="categorizeFlag"
        [myGroup]="myGroup"
        (viewImage)="viewImage($event)"
        (deleteIdea)="deleteIdea($event)">

      </benji-uncategorized-ideas>
    </ng-container>

    <ng-container *ngIf="boardMode=='thread'">
      <benji-thread-mode-ideas
        [board]="board"
        [submissionScreen]="submissionScreen"
        [voteScreen]="voteScreen"
        [act]="act"
        [activityState]="activityState"
        [sendMessage]="sendMessage"
        [joinedUsers]="joinedUsers"
        [showUserName]="showUserName"
        [participantCode]="participantCode"
        [eventType]="eventType"
        [categorizeFlag]="categorizeFlag"
        [myGroup]="myGroup"
        (viewImage)="viewImage($event)"
        (deleteIdea)="deleteIdea($event)">

      </benji-thread-mode-ideas>
    </ng-container>

  </div>
</div>
