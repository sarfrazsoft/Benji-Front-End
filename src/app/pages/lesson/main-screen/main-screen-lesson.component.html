
      
  <benji-main-screen-toolbar 
    [activityState]="serverMessage"
    *ngIf="isConnected() && serverMessage && navType==='boards'"
    [isLastActivity]="!isLastActivity()"
    [showHeader]="getActivityType() !== at.lobby"
    [roomCode]="serverMessage.lesson_run.lessonrun_code"
    [lesson]="serverMessage.lesson"
    [isPaused]="isPaused()"
    [disableControls]="disableControls"
    [isSharing]="getIsSharing()"
    [isGrouping]="getIsGrouping()"
    [participantCode]="getParticipantCode()"
    [isGroupingShowing]="getIsGroupingShowing()"
    (socketMessage)="sendSocketMessage($event)"
    (openSettingsMenuEvent)="openSettingsMenu()"
    (toggleBoardsMenuEvent)="toggleBoardsMenu()"
    [boardsMenuClosed]="boardsMenuClosed"
  ></benji-main-screen-toolbar>

<mat-sidenav-container
    class="example-container"
    (backdropClick)="closeAndResetNav()">
  <mat-sidenav 
    #sidenav
    [mode]="sideNavMode" 
    (keydown.escape)="closeAndResetNav()"
    [position]="sideNavPosition"
    (openedStart)="sideNavOpenedStart()" 
    (closedStart)="sideNavClosedStart()"
    (openedChange)="openedChange($event)">
      <benji-board-menu *ngIf="serverMessage"
        #boardMenu
        [sidenav]="sidenav" 
        [navType]="navType"
        [activityState]="serverMessage"
        (sendMessage)="sendSocketMessage($event)">
      </benji-board-menu>
  </mat-sidenav>

  <mat-sidenav-content>
    <div class="ms-preloader flexer align-center" *ngIf="!isConnected() || !isFacilitatorConnected()">
      <mat-spinner></mat-spinner>
    </div>

    <div class="ms-fullheight-container" [ngClass]="{'boards-menu-opened': !boardsMenuClosed}">

      <benji-main-screen-toolbar 
        [activityState]="serverMessage"
        *ngIf="isConnected() && serverMessage && navType!=='boards'"
        [isLastActivity]="!isLastActivity()"
        [showHeader]="getActivityType() !== at.lobby"
        [roomCode]="serverMessage.lesson_run.lessonrun_code"
        [lesson]="serverMessage.lesson"
        [isPaused]="isPaused()"
        [disableControls]="disableControls"
        [isSharing]="getIsSharing()"
        [isGrouping]="getIsGrouping()"
        [participantCode]="getParticipantCode()"
        [isGroupingShowing]="getIsGroupingShowing()"
        (socketMessage)="sendSocketMessage($event)"
        (openSettingsMenuEvent)="openSettingsMenu()"
        (toggleBoardsMenuEvent)="toggleBoardsMenu()"
        [boardsMenuClosed]="boardsMenuClosed"
      ></benji-main-screen-toolbar>

      <div
        *ngIf="isConnected() && serverMessage"
        [ngClass]="
          getActivityType() === at.lobby
            ? 'ms-lesson__activity-container ms-lesson__activity-container--lobby'
            : 'ms-lesson__activity-container'
        "
      >
        <ng-container *ngIf="!getIsSharing()">
          <benji-ms-brainstorming-activity
            *ngIf="getActivityType() === at.brainStorm"
            [activityState]="serverMessage"
            [avgServerTimeOffset]="avgServerTimeOffset"
            (sendMessage)="sendSocketMessage($event)"
            (firstLaunchEvent)="openBoardSettings()"
          >
          </benji-ms-brainstorming-activity>

          <benji-ms-image-activity
            *ngIf="getActivityType() === at.image"
            [activityState]="serverMessage"
            [avgServerTimeOffset]="avgServerTimeOffset"
            (sendMessage)="sendSocketMessage($event)"
          >
          </benji-ms-image-activity>

          <benji-ms-generate-pitch-activity
            *ngIf="getActivityType() === at.pitchoMatic"
            [activityState]="serverMessage"
            [avgServerTimeOffset]="avgServerTimeOffset"
            (sendMessage)="sendSocketMessage($event)"
          >
          </benji-ms-generate-pitch-activity>

          <benji-ms-build-pitch-activity
            *ngIf="getActivityType() === at.buildAPitch"
            [activityState]="serverMessage"
            [avgServerTimeOffset]="avgServerTimeOffset"
            (sendMessage)="sendSocketMessage($event)"
          >
          </benji-ms-build-pitch-activity>

          <benji-ms-lobby
            *ngIf="getActivityType() === at.lobby"
            [activityState]="serverMessage"
            [avgServerTimeOffset]="avgServerTimeOffset"
            (sendMessage)="sendSocketMessage($event)"
          >
          </benji-ms-lobby>

          <benji-ms-monty-hall
            *ngIf="getActivityType() === at.montyHall"
            [activityState]="serverMessage"
            [avgServerTimeOffset]="avgServerTimeOffset"
            (sendMessage)="sendSocketMessage($event)"
          >
          </benji-ms-monty-hall>

          <benji-ms-title-activity
            *ngIf="getActivityType() === at.title"
            [activityState]="serverMessage"
            [avgServerTimeOffset]="avgServerTimeOffset"
            (sendMessage)="sendSocketMessage($event)"
          >
          </benji-ms-title-activity>

          <benji-ms-poll
            *ngIf="getActivityType() === at.poll"
            [activityState]="serverMessage"
            [avgServerTimeOffset]="avgServerTimeOffset"
            (sendMessage)="sendSocketMessage($event)"
          ></benji-ms-poll>

          <benji-ms-pop-quiz
            *ngIf="getActivityType() === at.mcq"
            [activityState]="serverMessage"
            [avgServerTimeOffset]="avgServerTimeOffset"
            (sendMessage)="sendSocketMessage($event)"
          ></benji-ms-pop-quiz>

          <benji-ms-mcqresult-activity
            *ngIf="getActivityType() === at.mcqResults || getActivityType() === at.pollResults"
            [activityState]="serverMessage"
            (sendMessage)="sendSocketMessage($event)"
          ></benji-ms-mcqresult-activity>

          <benji-ms-teletrivia-activity
            *ngIf="getActivityType() === at.teleTrivia"
            [activityState]="serverMessage"
            [avgServerTimeOffset]="avgServerTimeOffset"
            (sendMessage)="sendSocketMessage($event)"
          >
          </benji-ms-teletrivia-activity>

          <benji-ms-either-or-activity
            *ngIf="getActivityType() === at.whereDoYouStand"
            [activityState]="serverMessage"
            [avgServerTimeOffset]="avgServerTimeOffset"
            (sendMessage)="sendSocketMessage($event)"
          >
          </benji-ms-either-or-activity>

          <benji-ms-activity-video
            *ngIf="getActivityType() === at.video"
            [activityState]="serverMessage"
            [avgServerTimeOffset]="avgServerTimeOffset"
            (sendMessage)="sendSocketMessage($event)"
          >
          </benji-ms-activity-video>

          <benji-ms-google-slides
            *ngIf="getActivityType() === at.slides"
            [activityState]="serverMessage"
            [avgServerTimeOffset]="avgServerTimeOffset"
            (sendMessage)="sendSocketMessage($event)"
          >
          </benji-ms-google-slides>

          <benji-ms-pair-grouping-activity
            *ngIf="getActivityType() === at.pairGrouping"
            [activityState]="serverMessage"
            [avgServerTimeOffset]="avgServerTimeOffset"
            (sendMessage)="sendSocketMessage($event)"
          >
          </benji-ms-pair-grouping-activity>

          <benji-ms-triad-grouping-activity
            *ngIf="getActivityType() === at.triadGrouping"
            [activityState]="serverMessage"
            [avgServerTimeOffset]="avgServerTimeOffset"
            (sendMessage)="sendSocketMessage($event)"
          >
          </benji-ms-triad-grouping-activity>

          <benji-ms-roleplay-pair-activity
            *ngIf="getActivityType() === at.rolePlayPair"
            [activityState]="serverMessage"
            [avgServerTimeOffset]="avgServerTimeOffset"
            (sendMessage)="sendSocketMessage($event)"
          >
          </benji-ms-roleplay-pair-activity>

          <benji-ms-generic-roleplay-activity
            *ngIf="getActivityType() === at.genericRoleplay"
            [activityState]="serverMessage"
            [avgServerTimeOffset]="avgServerTimeOffset"
            (sendMessage)="sendSocketMessage($event)"
          >
          </benji-ms-generic-roleplay-activity>

          <benji-ms-discussion-activity
            *ngIf="getActivityType() === at.discussion"
            [activityState]="serverMessage"
            [avgServerTimeOffset]="avgServerTimeOffset"
            (sendMessage)="sendSocketMessage($event)"
          >
          </benji-ms-discussion-activity>

          <benji-ms-feedback-activity
            *ngIf="getActivityType() === at.feedback"
            [activityState]="serverMessage"
            [avgServerTimeOffset]="avgServerTimeOffset"
            (sendMessage)="sendSocketMessage($event)"
          >
          </benji-ms-feedback-activity>

          <benji-ms-hint-activity
            *ngIf="getActivityType() === at.hintWord"
            [activityState]="serverMessage"
            [avgServerTimeOffset]="avgServerTimeOffset"
            (sendMessage)="sendSocketMessage($event)"
          >
          </benji-ms-hint-activity>

          <benji-ms-external-grouping-activity
            *ngIf="getActivityType() === at.externalGrouping"
            [activityState]="serverMessage"
            [avgServerTimeOffset]="avgServerTimeOffset"
            (sendMessage)="sendSocketMessage($event)"
          >
          </benji-ms-external-grouping-activity>

          <benji-ms-case-study-activity
            *ngIf="getActivityType() === at.caseStudy"
            [activityState]="serverMessage"
            [avgServerTimeOffset]="avgServerTimeOffset"
            (sendMessage)="sendSocketMessage($event)"
          >
          </benji-ms-case-study-activity>

          <benji-ms-convo-cards-activity
            *ngIf="getActivityType() === at.convoCards"
            [activityState]="serverMessage"
            [avgServerTimeOffset]="avgServerTimeOffset"
            (sendMessage)="sendSocketMessage($event)"
          >
          </benji-ms-convo-cards-activity>

          <benji-ms-gather-activity
            *ngIf="getActivityType() === at.gather"
            [activityState]="serverMessage"
            [avgServerTimeOffset]="avgServerTimeOffset"
            (sendMessage)="sendSocketMessage($event)"
          >
          </benji-ms-gather-activity>

        </ng-container>

        <ng-container *ngIf="getIsSharing()">
          <benji-ms-sharing-tool
            [activityState]="serverMessage"
            (sendMessage)="sendSocketMessage($event)"
          >
          </benji-ms-sharing-tool>
        </ng-container>
      </div>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>
