<div class="b-flat-card center-text mc-card ">
  <ng-container
    *ngIf="
      activityState.mcqactivity.question_timer.status === 'running' ||
      activityState.mcqactivity.question_timer.status === 'paused'
    "
  >
    <div class="b-flat-card__title"><h2 class="pn-400">Pop quiz</h2></div>
    <div class="b-flat-card__body">
      <h3 class="pn-600 primary-color-darkest">
        {{ activityState.mcqactivity.question.question }}
      </h3>
    </div>
    <div class="b-flat-card__action">
      <button
        *ngFor="
          let option of activityState.mcqactivity.question.mcqchoice_set;
          let i = index
        "
        class="b-standard-button unselected"
        [ngClass]="{
          selected: option.id === selectedChoice.id
        }"
        (click)="submitAnswer(option)"
      >
        {{ optionIdentifiers[i] }}. {{ option.choice_text }}
      </button>
    </div>
  </ng-container>

  <ng-container
    *ngIf="
      activityState.base_activity.next_activity_start_timer &&
      (activityState.base_activity.next_activity_start_timer.status ===
        'running' ||
        activityState.base_activity.next_activity_start_timer.status ===
          'paused')
    "
  >
    <div class="b-flat-card__title"><h2 class="pn-400">Pop quiz</h2></div>
    <div class="b-flat-card__body">
      <div class="b-flat-card__twemoji">
        <app-b-twemoji
          *ngIf="selectedChoice.is_correct"
          emoji="ðŸŽ‰"
        ></app-b-twemoji>
        <app-b-twemoji
          *ngIf="!selectedChoice.is_correct"
          emoji="ðŸ™Š"
        ></app-b-twemoji>
      </div>
      <h1 class="pn-700 primary-color-darkest">
        {{ selectedChoice.is_correct ? 'Correct!' : 'Oops, incorrect!' }}
      </h1>
    </div>
    <div class="b-flat-card__action">
      <ng-container
        *ngFor="
          let option of activityState.mcqactivity.question.mcqchoice_set;
          let i = index
        "
      >
        <button
          *ngIf="option.id === selectedChoice.id"
          class="b-standard-button unselected"
          [ngClass]="{
            'b-standard-button--correct': option.is_correct,
            'b-standard-button--incorrect': !option.is_correct
          }"
        >
          {{ optionIdentifiers[i] }}. {{ option.choice_text }}
        </button>
      </ng-container>
    </div>
    <div *ngIf="!selectedChoice.is_correct" class="b-flat-card__action-detail">
      <p>The correct answer is {{ getCorrectAnswer().choice_text }}</p>
    </div>
  </ng-container>

  <div class="mc-card__timer">
    <app-linear-timer
      [timer]="activityState.mcqactivity.question_timer"
      [timerOffset]="avgServerTimeOffset"
    ></app-linear-timer>
    <app-linear-timer
      [timer]="activityState.base_activity.next_activity_start_timer"
      [timerOffset]="avgServerTimeOffset"
    ></app-linear-timer>
  </div>
</div>
