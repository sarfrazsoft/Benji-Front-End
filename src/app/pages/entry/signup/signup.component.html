<div class="form-container" fxLayout="column">
  <div *ngIf="!isSubmitted">
    <div class="instruction">
      Create your Benji account to join or start a session and to view your
      dashboard.
    </div>
    <form
      [formGroup]="form"
      (ngSubmit)="onSubmit()"
      fxLayout="column"
      fxLayoutGap="20px"
    >
      <div>
        <input
          id="firstName"
          class="dash-input"
          required
          type="text"
          formControlName="firstName"
          placeholder="First name"
        />
        <mat-error
          *ngIf="
            firstName.invalid &&
            (firstName.dirty || firstName.touched) &&
            isSignupClicked
          "
          class="alert alert-danger"
        >
          <div *ngIf="firstName.errors.required">
            First name is required.
          </div>
        </mat-error>
      </div>
      <div>
        <input
          id="lastName"
          class="dash-input"
          required
          type="text"
          formControlName="lastName"
          placeholder="Last name"
        />
        <mat-error
          *ngIf="
            lastName.invalid &&
            (lastName.dirty || lastName.touched) &&
            isSignupClicked
          "
          class="alert alert-danger"
        >
          <div *ngIf="lastName.errors.required">
            Last name is required.
          </div>
        </mat-error>
      </div>
      <div class="email-control">
        <input
          id="email"
          class="dash-input"
          required
          type="email"
          pattern='^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$'
          formControlName="email"
          placeholder="Email Address"
          (keydown)="emailChanged()"
        />
        <mat-error
          *ngIf="
            email.invalid && (email.dirty || email.touched) && isSignupClicked
          "
          class="alert alert-danger"
        >
          <div *ngIf="email.errors.required">
            Email is required.
          </div>
          <div *ngIf="email.errors.emailErr">
            {{ emailErrMsg }}
          </div>
          <div *ngIf="email.errors.email">
            It should be a valid email.
          </div>
        </mat-error>
        <mat-error *ngIf="emailErr" class="alert alert-danger">
          <div>
            {{ emailErrMsg }}
          </div>
        </mat-error>
      </div>

      <div class="password-control">
        <input
          class="dash-input"
          required
          type="password"
          formControlName="password"
          placeholder="Password"
          minlength="8"
        />
        <mat-error
          *ngIf="
            password.invalid &&
            (password.dirty || password.touched) &&
            isSignupClicked
          "
          class="alert alert-danger"
        >
          <div *ngIf="password.errors.required">
            Password is required.
          </div>
          <div *ngIf="password.errors.minlength || passwordMinLenErr">
            Password must be 8 characters long.
          </div>
          <div *ngIf="password.errors.notEquivalent">
            Password and Confirm password do not match.
          </div>
        </mat-error>
      </div>

      <div class="password-control">
        <input
          class="dash-input"
          required
          type="password"
          formControlName="confirmPassword"
          placeholder="Confirm Password"
        />
        <mat-error
          *ngIf="
            confirmPassword.invalid &&
            (confirmPassword.dirty || confirmPassword.touched) &&
            isSignupClicked
          "
          class="alert alert-danger"
        >
          <div *ngIf="confirmPassword.errors.required">
            Confirm password is required.
          </div>
          <div *ngIf="confirmPassword.errors.notEquivalent">
            Password and Confirm password do not match.
          </div>
        </mat-error>
      </div>

      <button
        type="submit"
        class="dashboard-button"
        [ngClass]="{
          active: form.valid,
          inactive: !form.valid
        }"
      >
        Create account
      </button>
    </form>
  </div>
</div>

<div class="confirmation-container" *ngIf="isSubmitted">
  <h3>Thanks! Youâ€™re almost done.</h3>
  <div>
    Check your inbox for a confirmation email and click the link inside to
    finish your Benji registration.
  </div>
</div>
