<ng-container *ngIf="!gameStarted && makingCircle">

  <div class="b-flat-card center-text mc-card--circle">
    <div class="b-flat-card__title">
      <h2 class="pn-400">Multiple Choice</h2>
    </div>
    <div class="b-flat-card__body">
      <div class="b-flat-card__twemoji">
        <app-b-twemoji emoji="⭕"></app-b-twemoji>
      </div>
      <h3 class="pn-700 deep-blue">Form a circle</h3>
      <p>We'll start get started once everyone is ready</p>
    </div>
    <div class="b-flat-card__action">
      <button class="b-standard-button" (click)="sendReadyState()" [ngClass]="{'b-standard-button--inactive': inCircle}">
        <span *ngIf="!inCircle">
          I'm in the circle!
        </span>
        <span *ngIf="inCircle">
          Waiting...
        </span>
      </button>
    </div>
  </div>
</ng-container>

<ng-container *ngIf="!gameStarted && !makingCircle">
  <div class="b-flat-card center-text mc-card--circle">
    <div class="b-flat-card__title">
      <h2 class="pn-400">Multiple Choice</h2>
    </div>
    <div class="b-flat-card__body">
      <h3 class="pn-700 vibrant-blue">Waiting...</h3>
      <div class="mc-card__loader">
        <mat-spinner></mat-spinner>
      </div>
      <p>Get ready, the activity is about to start.</p>
    </div>
  </div>
</ng-container>



<ng-container *ngIf="gameStarted">
  <div class="b-flat-card center-text mc-card " [ngClass]="{'mc-card--starter-layout': iAmInitiator }">
    <div class="b-flat-card__title">
      <h2 class="pn-400">Multiple Choice</h2>
    </div>
    <div class="b-flat-card__body">
      <h3 class="pn-400 brownish-grey">{{questions[currentQuestionIndex].question}}</h3>
    </div>
    <div class="b-flat-card__action">
      <button class="b-standard-button b-standard-button--unselected" [ngClass]="{'b-standard-button--selected': i === selectedAnswerIndex, 'b-standard-button--correct': showAnswerDetail && choice.is_correct }"
        *ngFor="let choice of questions[currentQuestionIndex].choices; index as i" (click)="checkAnswer(choice, $event.target, i)">{{choice.choice_text}}</button>
    </div>
    <div class="b-flat-card__action-detail" *ngIf="showAnswerDetail">
      <p>{{answerExplanation}}</p>
    </div>
  </div>
  <div class="mc-card__timer mc-card__timer--starter-layout" [ngClass]="{'mc-card__timer--starter-layout': iAmInitiator }">
    <app-linear-timer [timerType]="gameStateTimerType" [timeRemaining]="timeRemaining" (timesUp)="handleTimesUp($event)"
      *ngIf="!killTimer"></app-linear-timer>
  </div>
  <div class="b-baseline-action bg-indigo-blue" *ngIf="iAmInitiator">
    <app-animated-checkmark-button loadingStateInnerHTML="Loading" innerHTML="Done! The message is back" buttonStyle="white" [valid]="messageBack" (clicked)="openEndModal()"></app-animated-checkmark-button>
  </div>
</ng-container>

<!-- Dialogue Templates... see triggerDialogue method -->
<ng-template #kickofftemplate>
  <div class="b-dialog-template">
    <p>You’re starting telephone! Shh… don’t show anyone the secret message.</p>
    <blockquote>“{{phrase}}”</blockquote>
    <p>Whisper it to your neighbour, and press START to get the game rolling. Hit the DONE button when the message gets
      back to you!</p>
    <div class="b-dialog-template__action">
      <button class="b-standard-button b-standard-button--white" (click)="initiateTelephone()" [mat-dialog-close]="true">Start
        the telephone!</button>
    </div>
  </div>
</ng-template>

<ng-template #endTemplate>
  <div class="b-dialog-template">
    <p>
      Share the message you just received with the rest of the group.
    </p>

    <p>
      Remember what the original message was?
    </p>

    <p>
      “{{phrase}}”
    </p>
    <div class="b-dialog-template__action">
      <button class="b-standard-button b-standard-button--white" [mat-dialog-close]="true" (click)="endGame()">Done</button>
    </div>
  </div>
</ng-template>
