<!-- <ng-container *ngTemplateOutlet="formItemTemplate; context:{ $implicit: 0, group: form }"></ng-container>


<ng-template #formItemTemplate let-i let-group="group" >
  <fieldset *ngIf="i < pathSegments.length - 1" class="form-group">
    <legend>{{ pathSegments[i] }}</legend>
    <ng-container *ngTemplateOutlet="formItemTemplate; context:{ $implicit: i + 1, group: group.get(pathSegments[i]) }"></ng-container>
  </fieldset>

  <div *ngIf="i + 1 === pathSegments.length" class="form-control" [formGroup]="group">
    <label>{{pathSegments[pathSegments.length - 1]}}</label>
    <input [formControlName]="pathSegments[pathSegments.length - 1]"/>
  </div>
</ng-template> -->

<div [formGroup]="form">
  <label [attr.for]="question.key">{{ question.label }}</label>

  <div [ngSwitch]="question.controlType">
    <input
      *ngSwitchCase="'textbox'"
      [formControlName]="question.key"
      [id]="question.key"
      [type]="question.type"
      [attr.readonly]="question.readonly"
    />

    <select [id]="question.key" *ngSwitchCase="'dropdown'" [formControlName]="question.key">
      <option *ngFor="let opt of question.options" [value]="opt.key">{{ opt.value }}</option>
    </select>

    <input
      *ngSwitchCase="'time'"
      [formControlName]="question.key"
      [id]="question.key"
      [type]="question.type"
    />

    <mat-checkbox
      *ngSwitchCase="'checkbox'"
      [formControlName]="question.key"
      [id]="question.key"
      [checked]="question.value"
      >{{ question.key }}</mat-checkbox
    >

    <div *ngSwitchCase="'emoji'">
      <benji-emoji-selector></benji-emoji-selector>
    </div>
  </div>

  <div class="errorMessage" *ngIf="!isValid" (click)="logErrors()">{{ question.label }} is required</div>
</div>
