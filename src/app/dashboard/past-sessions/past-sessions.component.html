<div class="admin-panel" fxLayout="column">
  <div class="dashboard-heading">
    <h1>Past Sessions</h1>
  </div>

  <div class="learners-info" fxLayout="column">
    <div class="learner-table">
      <div class="example-container">
        <div
          class="example-loading-shade"
          *ngIf="isLoadingResults || isRateLimitReached"
        >
          <mat-spinner *ngIf="isLoadingResults"></mat-spinner>
          <div class="example-rate-limit-reached" *ngIf="isRateLimitReached">
            You might not have access to this page. Please contact your admin.
          </div>
        </div>

        <div class="example-table-container">
          <table
            mat-table
            [dataSource]="data"
            class="example-table"
            matSort
            matSortActive="created"
            matSortDisableClear
            matSortDirection="desc"
          >
            <!-- Checkbox Column -->
            <ng-container matColumnDef="select">
              <th mat-header-cell *matHeaderCellDef>
                <mat-checkbox
                  (change)="$event ? masterToggle() : null"
                  [checked]="selection.hasValue() && isAllSelected()"
                  [indeterminate]="selection.hasValue() && !isAllSelected()"
                  [aria-label]="checkboxLabel()"
                >
                </mat-checkbox>
              </th>
              <td mat-cell *matCellDef="let row">
                <mat-checkbox
                  (click)="$event.stopPropagation()"
                  (change)="$event ? selection.toggle(row) : null"
                  [checked]="selection.isSelected(row)"
                  [aria-label]="checkboxLabel(row)"
                >
                </mat-checkbox>
              </td>
            </ng-container>

            <!-- Number Column -->
            <ng-container matColumnDef="date">
              <th mat-header-cell *matHeaderCellDef>Date.</th>
              <td mat-cell *matCellDef="let row">{{ row.date }}</td>
            </ng-container>

            <!-- First Name Column -->
            <ng-container matColumnDef="title">
              <th mat-header-cell *matHeaderCellDef>Title</th>
              <td mat-cell *matCellDef="let row">{{ row.title }}</td>
            </ng-container>

            <!-- Last Name Column -->
            <ng-container matColumnDef="hosted_by">
              <th mat-header-cell *matHeaderCellDef>Hosted by</th>
              <td mat-cell *matCellDef="let row">{{ row.hosted_by }}</td>
            </ng-container>

            <!-- Job Title Column -->
            <ng-container matColumnDef="participants">
              <th mat-header-cell *matHeaderCellDef># of participants</th>
              <td mat-cell *matCellDef="let row">
                {{ row.participants }}
              </td>
            </ng-container>

            <!-- View Report Column -->
            <ng-container matColumnDef="report">
              <th mat-header-cell *matHeaderCellDef>Reports</th>
              <td mat-cell *matCellDef="let row">
                {{ row.report }}
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr
              mat-row
              *matRowDef="let row; columns: displayedColumns"
              (click)="showReports(row)"
            ></tr>
          </table>
        </div>

        <mat-paginator
          [length]="resultsLength"
          [pageSize]="30"
          [showFirstLastButtons]="true"
        ></mat-paginator>
      </div>
    </div>
  </div>
</div>
